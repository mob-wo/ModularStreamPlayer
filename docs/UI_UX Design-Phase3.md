## **UI/UX設計書: Modular Stream Player (Phase 3 - 差分)**

### 1. フェーズ3におけるUI/UXの主要変更点
本フェーズでは、データソースとしてネットワーク上の共有フォルダ（NAS/SMB）に対応します。これにより、ユーザーはローカルストレージだけでなく、家庭内サーバーに保存された音楽ライブラリにもアクセスできるようになります。

*   **NAS接続設定画面の追加**: NASの接続情報（サーバーアドレス、認証情報など）を管理するための専用画面を「詳細設定」画面内に追加します。
*   **ナビゲーションドロワーの拡張**: 保存されたNASがデータソースの選択肢として表示され、ワンタップでローカルとNASを切り替えられるようになります。
*   **シームレスなブラウジング体験**: データソースがNASに切り替わっても、ファイルブラウザの操作感はローカルストレージ閲覧時と変わらない、一貫したUXを提供します。

### 2. 更新された画面遷移図

フェーズ2のフローに、NAS接続情報の追加・編集フローを追加します。

```mermaid
graph TD
    subgraph "Main Flow"
        I(ナビゲーションドロワー) --> |[⚙️]詳細設定| J[詳細設定画面]
    end

    subgraph "Settings Flow"
        J --> |NAS接続設定| M[NAS接続一覧画面]
        M --> |[+]新規追加| N(NAS接続設定エディタ)
        M --> |既存の接続をタップ| N
        N --> |保存/キャンセル| M
    end

    subgraph "Data Source Switching"
        I -- NAS-Serverをタップ --> C[ファイルブラウザ画面]
    end
```

### 3. ワイヤーフレーム (追加・変更部)

#### 3.1. ナビゲーションドロワー (NavigationDrawer) - 更新
*   **データソース**: 保存済みのNASが選択肢として表示されます。

**[ワイヤーフレーム: データソースの拡張]**
```
| ▼ データソース                   |
|   ◉ ローカルストレージ           |
|   ○ My-NAS (192.168.1.10)        |  <-- 保存されたNASが追加される
|   ○ (別のNAS...)                 |
```

---

#### 3.2. 詳細設定画面 (SettingsScreen) - 更新
*   NAS接続情報を管理するための項目が追加されます。

**[ワイヤーフレーム]**
```
+------------------------------------------------------+
| [←] 詳細設定                                         |
+------------------------------------------------------+
|                                                      |
|  ローカルストレージ設定                              |
|  ...                                                 |
|  --------------------------------------------------  |
|  NAS接続設定                                         |  <-- この項目をタップ
|  NASサーバーを管理します                               |
|  --------------------------------------------------  |
|  ...                                                 |
+------------------------------------------------------+
```

---

#### 3.3. NAS接続一覧画面 (NasConnectionListScreen) - 新規
*   保存されているNAS接続情報の一覧を表示し、新規追加・編集・削除の起点となります。

**[ワイヤーフレーム]**
```
+------------------------------------------------------+
| [←] NAS接続設定                                [＋]  |  <-- 新規追加ボタン
+------------------------------------------------------+
|                                                      |
|  My-NAS                                              |  <-- 保存済み接続 (タップで編集)
|  192.168.1.10/Music                                  |
|  --------------------------------------------------  |
|  Backup-Server                                       |  (長押しで削除確認)
|  server.local/Backup/Audio                           |
|  --------------------------------------------------  |
|                                                      |
+------------------------------------------------------+
```

---

#### 3.4. NAS接続設定エディタ (NasConnectionEditorScreen) - 新規
*   NAS接続情報の詳細を入力・編集するためのフォーム画面です。

**[ワイヤーフレーム]**
```
+------------------------------------------------------+
| [←] NAS接続の編集/追加                              |
+------------------------------------------------------+
|                                                      |
|  ニックネーム (必須)                                 |
|  [ My-NAS                                     ]      |
|                                                      |
|  ホスト名またはIPアドレス (必須)                     |
|  [ 192.168.1.10                           ]      |
|                                                      |
|  共有フォルダ名 (必須)                               |
|  [ Music                                      ]      |
|                                                      |
|  ユーザー名 (オプション)                             |
|  [                                            ]      |
|                                                      |
|  パスワード (オプション)                              |
|  [ ••••••••                                 ]      |
|                                                      |
|  [ 接続テスト ]                                      |
|                                                      |
|  +------------------------------------------------+  |
|  |                     保存                       |  |
|  +------------------------------------------------+  |
|                                                      |
+------------------------------------------------------+
```

### 4. 主要なユーザーインタラクション
*   **NAS接続の追加/編集 (`F-01`)**: ユーザーはエディタ画面で情報を入力し、「保存」をタップします。入力内容に不備がある場合はエラーメッセージが表示されます。
*   **接続テスト**: 「接続テスト」ボタンをタップすると、入力された情報でNASへの接続を試み、結果をSnackbarなどでユーザーに通知します。
*   **データソースの切り替え (`F-23`)**: ドロワーでNASを選択すると、ファイルブラウザがそのNASのコンテンツを表示するように即座に切り替わります。
